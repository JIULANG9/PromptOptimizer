name: Flutter CI/CD

on:
  push:
    branches: [ main, develop ]
    tags:
      - 'v*'
  pull_request:
    branches: [ main ]

permissions:
  contents: write
  actions: read

env:
  FLUTTER_VERSION: '3.38.9'  # ä½¿ç”¨ç¨³å®šç‰ˆæœ¬
  DART_VERSION: '3.10.8'  # ä¸é¡¹ç›®è¦æ±‚ ^3.10.3 å…¼å®¹
  JAVA_VERSION: '17'

jobs:
  # ä»£ç è´¨é‡æ£€æŸ¥
  analyze:
    name: Code Analysis
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          dart-version: ${{ env.DART_VERSION }}
          channel: 'stable'
          cache: true

      - name: Install dependencies
        run: flutter pub get

      - name: Generate code
        run: dart run build_runner build --delete-conflicting-outputs

      - name: Analyze code
        run: flutter analyze

      - name: Run tests
        run: flutter test

  # ==========================================
  # Android å¤šæ¶æ„æ„å»º
  # ==========================================
  build_android:
    name: Build Android ${{ matrix.arch }}
    runs-on: ubuntu-latest
    needs: analyze
    if: github.event_name == 'push' || github.event_name == 'pull_request'
    strategy:
      matrix:
        include:
          - arch: arm64-v8a
            target: android-arm64
            output_name: android-arm64v8
          - arch: armeabi-v7a
            target: android-arm
            output_name: android-arm32v7
          - arch: x86_64
            target: android-x64
            output_name: android-x64
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: ${{ env.JAVA_VERSION }}

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          dart-version: ${{ env.DART_VERSION }}
          channel: 'stable'
          cache: true

      - name: Install dependencies
        run: flutter pub get

      - name: Generate code
        run: dart run build_runner build --delete-conflicting-outputs

      - name: Decode and Validate Keystore
        if: github.event_name != 'pull_request'
        env:
          KEYSTORE_BASE64: ${{ secrets.KEYSTORE_BASE64 }}
        run: |
          set -euo pipefail
          if [ -z "$KEYSTORE_BASE64" ]; then
            echo "Error: KEYSTORE_BASE64 secret is not set."
            exit 1
          fi
          mkdir -p android/app/sign
          echo "$KEYSTORE_BASE64" | base64 --decode > android/app/sign/prompt_optimization.jks
          
          # Verify keystore
          if [ ! -s android/app/sign/prompt_optimization.jks ]; then
            echo "Error: Keystore file is empty after decoding."
            exit 1
          fi
          keytool -list -keystore android/app/sign/prompt_optimization.jks -storepass ${{ secrets.KEYSTORE_PASSWORD }} -v 2>&1 | head -20

      - name: Create key.properties
        if: github.event_name != 'pull_request'
        env:
          KEYSTORE_PASSWORD: ${{ secrets.KEYSTORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
          KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
        run: |
          cat > android/key.properties << EOF
          storePassword=$KEYSTORE_PASSWORD
          keyPassword=$KEY_PASSWORD
          keyAlias=$KEY_ALIAS
          storeFile=sign/prompt_optimization.jks
          EOF

      - name: Build APK (${{ matrix.arch }})
        run: |
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            flutter build apk --debug --target-platform ${{ matrix.target }} --no-tree-shake-icons
          else
            flutter build apk --release --target-platform ${{ matrix.target }} --no-tree-shake-icons
          fi

      - name: Rename APK with version
        run: |
          VERSION=$(grep '^version:' pubspec.yaml | cut -d' ' -f2 | cut -d'+' -f1)
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            SOURCE="build/app/outputs/flutter-apk/app-debug.apk"
          else
            SOURCE="build/app/outputs/flutter-apk/app-release.apk"
          fi
          cp "$SOURCE" "prompt-optimizer-${VERSION}-${{ matrix.output_name }}.apk"

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          name: android-${{ matrix.output_name }}
          path: prompt-optimizer-*.apk
          retention-days: 30

  # Android AAB (Google Play å‘å¸ƒ)
  build_android_aab:
    name: Build Android AAB (Google Play)
    runs-on: ubuntu-latest
    needs: analyze
    if: github.event_name == 'push' || github.event_name == 'pull_request'
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: ${{ env.JAVA_VERSION }}

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          dart-version: ${{ env.DART_VERSION }}
          channel: 'stable'
          cache: true

      - name: Install dependencies
        run: flutter pub get

      - name: Generate code
        run: dart run build_runner build --delete-conflicting-outputs

      - name: Decode and Validate Keystore
        if: github.event_name != 'pull_request'
        run: |
          set -euo pipefail
          KEYSTORE_BASE64="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"
          mkdir -p android/app/sign
          echo "$KEYSTORE_BASE64" | base64 --decode > android/app/sign/prompt_optimization.jks
          
          # Verify keystore
          if [ ! -s android/app/sign/prompt_optimization.jks ]; then
            echo "Error: Keystore file is empty after decoding."
            exit 1
          fi
          keytool -list -keystore android/app/sign/prompt_optimization.jks -storepass prompt_optimization -v 2>&1 | head -20

      - name: Create key.properties
        if: github.event_name != 'pull_request'
        env:
          KEYSTORE_PASSWORD: ${{ secrets.KEYSTORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
          KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
        run: |
          cat > android/key.properties << EOF
          storePassword=$KEYSTORE_PASSWORD
          keyPassword=$KEY_PASSWORD
          keyAlias=$KEY_ALIAS
          storeFile=sign/prompt_optimization.jks
          EOF

      - name: Build AAB (App Bundle)
        run: |
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            flutter build appbundle --debug --no-tree-shake-icons
          else
            flutter build appbundle --release --no-tree-shake-icons
          fi

      - name: Rename AAB with version
        run: |
          VERSION=$(grep '^version:' pubspec.yaml | cut -d' ' -f2 | cut -d'+' -f1)
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            SOURCE="build/app/outputs/bundle/debug/app-debug.aab"
          else
            SOURCE="build/app/outputs/bundle/release/app-release.aab"
          fi
          cp "$SOURCE" "prompt-optimizer-${VERSION}-android-google-play.aab"

      - name: Upload AAB
        uses: actions/upload-artifact@v4
        with:
          name: android-google-play
          path: prompt-optimizer-*.aab
          retention-days: 30

  # ==========================================
  # Windows æ„å»º
  # ==========================================
  build_windows:
    name: Build Windows
    runs-on: windows-latest
    needs: analyze
    if: github.event_name == 'push' || github.event_name == 'pull_request'
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          dart-version: ${{ env.DART_VERSION }}
          channel: 'stable'
          cache: true

      - name: Install dependencies
        run: flutter pub get

      - name: Generate code
        run: dart run build_runner build --delete-conflicting-outputs

      - name: Build Windows executable
        run: |
          if ('${{ github.event_name }}' -eq 'pull_request') {
            flutter build windows --debug
          } else {
            flutter build windows --release
          }

      - name: Package Windows
        run: |
          $VERSION = (Select-String -Path pubspec.yaml -Pattern '^version:').Line.Split(' ')[1].Split('+')[0]
          if ('${{ github.event_name }}' -eq 'pull_request') {
            $source = "build/windows/x64/runner/Debug"
          } else {
            $source = "build/windows/x64/runner/Release"
          }
          Compress-Archive -Path "$source\*" -DestinationPath "prompt-optimizer-$VERSION-windows-x86_64.zip" -Force

      - name: Upload Windows
        uses: actions/upload-artifact@v4
        with:
          name: windows
          path: prompt-optimizer-*.zip
          retention-days: 30

  # Linux æ„å»ºä»»åŠ¡
  build_linux:
    name: Build Linux
    runs-on: ubuntu-latest
    needs: analyze
    if: github.event_name == 'push' || github.event_name == 'pull_request'
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          dart-version: ${{ env.DART_VERSION }}
          channel: 'stable'
          cache: true

      - name: Install Linux dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y clang cmake ninja-build pkg-config libgtk-3-dev liblzma-dev

      - name: Install dependencies
        run: flutter pub get

      - name: Generate code
        run: dart run build_runner build --delete-conflicting-outputs

      - name: Build Linux executable
        run: |
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            flutter build linux --debug
          else
            flutter build linux --release
          fi

      - name: Package Linux
        run: |
          VERSION=$(grep '^version:' pubspec.yaml | cut -d' ' -f2 | cut -d'+' -f1)
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            SOURCE="build/linux/x64/debug/bundle"
          else
            SOURCE="build/linux/x64/release/bundle"
          fi
          tar -czf "prompt-optimizer-${VERSION}-linux-x86_64.tar.gz" -C "$SOURCE" .

      - name: Upload Linux
        uses: actions/upload-artifact@v4
        with:
          name: linux
          path: prompt-optimizer-*.tar.gz
          retention-days: 30

  # macOS æ„å»ºä»»åŠ¡
  build_macos:
    name: Build macOS
    runs-on: macos-latest
    needs: analyze
    if: github.event_name == 'push' || github.event_name == 'pull_request'
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          dart-version: ${{ env.DART_VERSION }}
          channel: 'stable'
          cache: true

      - name: Install dependencies
        run: flutter pub get

      - name: Generate code
        run: dart run build_runner build --delete-conflicting-outputs

      - name: Build macOS app
        run: |
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            flutter build macos --debug
          else
            flutter build macos --release
          fi

      - name: Package macOS
        run: |
          VERSION=$(grep '^version:' pubspec.yaml | cut -d' ' -f2 | cut -d'+' -f1)
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            SOURCE="build/macos/Build/Products/Debug"
          else
            SOURCE="build/macos/Build/Products/Release"
          fi
          cd "$SOURCE"
          zip -r "../../../prompt-optimizer-${VERSION}-macos-universal.zip" *.app

      - name: Upload macOS
        uses: actions/upload-artifact@v4
        with:
          name: macos
          path: prompt-optimizer-*.zip
          retention-days: 30

  # ==========================================
  # Web æ„å»º
  # ==========================================
  build_web:
    name: Build Web
    runs-on: ubuntu-latest
    needs: analyze
    if: github.event_name == 'push' || github.event_name == 'pull_request'
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          dart-version: ${{ env.DART_VERSION }}
          channel: 'stable'
          cache: true

      - name: Install dependencies
        run: flutter pub get

      - name: Generate code
        run: dart run build_runner build --delete-conflicting-outputs

      - name: Build Web app
        run: flutter build web

      - name: Package Web
        run: |
          VERSION=$(grep '^version:' pubspec.yaml | cut -d' ' -f2 | cut -d'+' -f1)
          cd build/web
          zip -r "../../prompt-optimizer-${VERSION}-web.zip" .

      - name: Upload Web
        uses: actions/upload-artifact@v4
        with:
          name: web
          path: prompt-optimizer-*.zip
          retention-days: 30


  # è‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬ Tag å’Œ Release
  create_tag_and_release:
    name: Create Tag and Release
    runs-on: ubuntu-latest
    needs: [build_android, build_android_aab, build_windows, build_linux, build_macos, build_web]
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Get version
        id: get_version
        run: |
          VERSION=$(grep '^version:' pubspec.yaml | cut -d' ' -f2 | cut -d'+' -f1)
          echo "version=$VERSION" >> $GITHUB_OUTPUT
          echo "Found version: $VERSION"

      - name: Check if tag exists
        id: check_tag
        run: |
          TAG="v${{ steps.get_version.outputs.version }}"
          if git rev-parse "$TAG" >/dev/null 2>&1; then
            echo "exists=true" >> $GITHUB_OUTPUT
            echo "Tag $TAG already exists"
          else
            echo "exists=false" >> $GITHUB_OUTPUT
            echo "Tag $TAG does not exist"
          fi

      - name: Download all artifacts
        if: steps.check_tag.outputs.exists == 'false'
        uses: actions/download-artifact@v4
        with:
          path: artifacts
          merge-multiple: true

      - name: List artifacts
        if: steps.check_tag.outputs.exists == 'false'
        run: ls -la artifacts/

      - name: Create Tag
        if: steps.check_tag.outputs.exists == 'false'
        run: |
          TAG="v${{ steps.get_version.outputs.version }}"
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git tag -a "$TAG" -m "Release $TAG"
          git push origin "$TAG"

      - name: Create Release
        if: steps.check_tag.outputs.exists == 'false'
        uses: softprops/action-gh-release@v1
        with:
          tag_name: "v${{ steps.get_version.outputs.version }}"
          name: "Prompt Optimizer v${{ steps.get_version.outputs.version }}"
          files: artifacts/*
          draft: false
          prerelease: false
          generate_release_notes: true
          body: |
            ## ğŸš€ Prompt Optimizer v${{ steps.get_version.outputs.version }}

            ### ğŸ“± ä¸‹è½½é“¾æ¥

            **Android:**
            - `prompt-optimizer-*-android-arm64v8.apk` - ARM64 è®¾å¤‡ï¼ˆæ¨èï¼‰
            - `prompt-optimizer-*-android-arm32v7.apk` - ARM32 è®¾å¤‡
            - `prompt-optimizer-*-android-x64.apk` - x86_64 æ¨¡æ‹Ÿå™¨/è®¾å¤‡
            - `prompt-optimizer-*-android-google-play.aab` - Google Play å‘å¸ƒ

            **Windows:**
            - `prompt-optimizer-*-windows-x86_64.zip` - Windows ä¾¿æºç‰ˆ

            **Linux:**
            - `prompt-optimizer-*-linux-x86_64.tar.gz` - Linux ä¾¿æºç‰ˆ

            **macOS:**
            - `prompt-optimizer-*-macos-universal.zip` - macOS åº”ç”¨

            **Web:**
            - `prompt-optimizer-*-web.zip` - Web éƒ¨ç½²æ–‡ä»¶

            ### âœ¨ æ–°ç‰¹æ€§
            è¯·æŸ¥çœ‹ [CHANGELOG.md](https://github.com/${{ github.repository }}/blob/main/CHANGELOG.md) äº†è§£è¯¦ç»†æ›´æ–°å†…å®¹ã€‚

            ### ğŸ“– ä½¿ç”¨è¯´æ˜
            è¯¦ç»†ä½¿ç”¨è¯´æ˜è¯·å‚è€ƒ [README.md](https://github.com/${{ github.repository }}/blob/main/README.md)
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

